{"ast":null,"code":"import _objectSpread from \"/home/asmane/vtc/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport formatErrorMessage from './formatErrorMessage';\nfunction isObj(o) {\n  return o != null && (typeof o === 'object' || typeof o == 'function');\n}\nfunction isPromiseLike(v) {\n  return v instanceof Promise || isObj(v) && typeof v.then === 'function';\n}\n/**\n * Create a data validator\n * @param data\n */\nexport function createValidator(data, name) {\n  return function (value, rules) {\n    for (var i = 0; i < rules.length; i += 1) {\n      var _rules$i = rules[i],\n        onValid = _rules$i.onValid,\n        errorMessage = _rules$i.errorMessage,\n        params = _rules$i.params,\n        isAsync = _rules$i.isAsync;\n      if (isAsync) continue;\n      var checkResult = onValid(value, data, name);\n      if (checkResult === false) {\n        return {\n          hasError: true,\n          errorMessage: formatErrorMessage(errorMessage, _objectSpread(_objectSpread({}, params), {}, {\n            name: Array.isArray(name) ? name.join('.') : name\n          }))\n        };\n      } else if (isPromiseLike(checkResult)) {\n        throw new Error('synchronous validator had an async result, you should probably call \"checkAsync()\"');\n      } else if (typeof checkResult === 'object' && (checkResult.hasError || checkResult.array)) {\n        return checkResult;\n      }\n    }\n    return null;\n  };\n}\nexport default createValidator;","map":{"version":3,"names":["formatErrorMessage","isObj","o","isPromiseLike","v","Promise","then","createValidator","data","name","value","rules","i","length","_rules$i","onValid","errorMessage","params","isAsync","checkResult","hasError","_objectSpread","Array","isArray","join","Error","array"],"sources":["/home/asmane/vtc/node_modules/schema-typed/src/utils/createValidator.ts"],"sourcesContent":["import { CheckResult, RuleType } from '../types';\nimport formatErrorMessage from './formatErrorMessage';\nfunction isObj(o: unknown): o is Record<PropertyKey, unknown> {\n  return o != null && (typeof o === 'object' || typeof o == 'function');\n}\nfunction isPromiseLike(v: unknown): v is Promise<unknown> {\n  return v instanceof Promise || (isObj(v) && typeof v.then === 'function');\n}\n/**\n * Create a data validator\n * @param data\n */\nexport function createValidator<V, D, E>(data?: D, name?: string | string[]) {\n  return (value: V, rules: RuleType<V, D, E>[]): CheckResult<E> | null => {\n    for (let i = 0; i < rules.length; i += 1) {\n      const { onValid, errorMessage, params, isAsync } = rules[i];\n      if (isAsync) continue;\n      const checkResult = onValid(value, data, name);\n\n      if (checkResult === false) {\n        return {\n          hasError: true,\n          errorMessage: formatErrorMessage<E>(errorMessage, {\n            ...params,\n            name: Array.isArray(name) ? name.join('.') : name\n          })\n        };\n      } else if (isPromiseLike(checkResult)) {\n        throw new Error(\n          'synchronous validator had an async result, you should probably call \"checkAsync()\"'\n        );\n      } else if (typeof checkResult === 'object' && (checkResult.hasError || checkResult.array)) {\n        return checkResult;\n      }\n    }\n\n    return null;\n  };\n}\n\nexport default createValidator;\n"],"mappings":";AACA,OAAOA,kBAAkB,MAAM,sBAAsB;AACrD,SAASC,KAAKA,CAACC,CAAU;EACvB,OAAOA,CAAC,IAAI,IAAI,KAAK,OAAOA,CAAC,KAAK,QAAQ,IAAI,OAAOA,CAAC,IAAI,UAAU,CAAC;AACvE;AACA,SAASC,aAAaA,CAACC,CAAU;EAC/B,OAAOA,CAAC,YAAYC,OAAO,IAAKJ,KAAK,CAACG,CAAC,CAAC,IAAI,OAAOA,CAAC,CAACE,IAAI,KAAK,UAAW;AAC3E;AACA;;;;AAIA,OAAM,SAAUC,eAAeA,CAAUC,IAAQ,EAAEC,IAAwB;EACzE,OAAO,UAACC,KAAQ,EAAEC,KAA0B,EAA2B;IACrE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,KAAK,CAACE,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;MACxC,IAAAE,QAAA,GAAmDH,KAAK,CAACC,CAAC,CAAC;QAAnDG,OAAO,GAAAD,QAAA,CAAPC,OAAO;QAAEC,YAAY,GAAAF,QAAA,CAAZE,YAAY;QAAEC,MAAM,GAAAH,QAAA,CAANG,MAAM;QAAEC,OAAO,GAAAJ,QAAA,CAAPI,OAAO;MAC9C,IAAIA,OAAO,EAAE;MACb,IAAMC,WAAW,GAAGJ,OAAO,CAACL,KAAK,EAAEF,IAAI,EAAEC,IAAI,CAAC;MAE9C,IAAIU,WAAW,KAAK,KAAK,EAAE;QACzB,OAAO;UACLC,QAAQ,EAAE,IAAI;UACdJ,YAAY,EAAEhB,kBAAkB,CAAIgB,YAAY,EAAAK,aAAA,CAAAA,aAAA,KAC3CJ,MAAM;YACTR,IAAI,EAAEa,KAAK,CAACC,OAAO,CAACd,IAAI,CAAC,GAAGA,IAAI,CAACe,IAAI,CAAC,GAAG,CAAC,GAAGf;UAAI,EAClD;SACF;OACF,MAAM,IAAIN,aAAa,CAACgB,WAAW,CAAC,EAAE;QACrC,MAAM,IAAIM,KAAK,CACb,oFAAoF,CACrF;OACF,MAAM,IAAI,OAAON,WAAW,KAAK,QAAQ,KAAKA,WAAW,CAACC,QAAQ,IAAID,WAAW,CAACO,KAAK,CAAC,EAAE;QACzF,OAAOP,WAAW;;;IAItB,OAAO,IAAI;EACb,CAAC;AACH;AAEA,eAAeZ,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}
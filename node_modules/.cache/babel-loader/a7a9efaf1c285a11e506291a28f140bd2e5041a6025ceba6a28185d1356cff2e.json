{"ast":null,"code":"import _toConsumableArray from \"/home/asmane/vtc/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/home/asmane/vtc/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/asmane/vtc/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/home/asmane/vtc/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/home/asmane/vtc/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/asmane/vtc/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _get from \"/home/asmane/vtc/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/home/asmane/vtc/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport { MixedType } from './MixedType';\nexport var ArrayType = /*#__PURE__*/function (_MixedType) {\n  _inherits(ArrayType, _MixedType);\n  var _super = _createSuper(ArrayType);\n  function ArrayType(errorMessage) {\n    var _thisSuper, _this;\n    _classCallCheck(this, ArrayType);\n    _this = _super.call(this, 'array');\n    _get((_thisSuper = _assertThisInitialized(_this), _getPrototypeOf(ArrayType.prototype)), \"pushRule\", _thisSuper).call(_thisSuper, {\n      onValid: function onValid(v) {\n        return Array.isArray(v);\n      },\n      errorMessage: errorMessage || _this.locale.type\n    });\n    return _this;\n  }\n  _createClass(ArrayType, [{\n    key: \"rangeLength\",\n    value: function rangeLength(minLength, maxLength) {\n      var errorMessage = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.locale.rangeLength;\n      _get(_getPrototypeOf(ArrayType.prototype), \"pushRule\", this).call(this, {\n        onValid: function onValid(value) {\n          return value.length >= minLength && value.length <= maxLength;\n        },\n        errorMessage: errorMessage,\n        params: {\n          minLength: minLength,\n          maxLength: maxLength\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"minLength\",\n    value: function minLength(_minLength) {\n      var errorMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.locale.minLength;\n      _get(_getPrototypeOf(ArrayType.prototype), \"pushRule\", this).call(this, {\n        onValid: function onValid(value) {\n          return value.length >= _minLength;\n        },\n        errorMessage: errorMessage,\n        params: {\n          minLength: _minLength\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"maxLength\",\n    value: function maxLength(_maxLength) {\n      var errorMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.locale.maxLength;\n      _get(_getPrototypeOf(ArrayType.prototype), \"pushRule\", this).call(this, {\n        onValid: function onValid(value) {\n          return value.length <= _maxLength;\n        },\n        errorMessage: errorMessage,\n        params: {\n          maxLength: _maxLength\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"unrepeatable\",\n    value: function unrepeatable() {\n      var errorMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.locale.unrepeatable;\n      _get(_getPrototypeOf(ArrayType.prototype), \"pushRule\", this).call(this, {\n        onValid: function onValid(items) {\n          var hash = {};\n          for (var i in items) {\n            if (hash[items[i]]) {\n              return false;\n            }\n            hash[items[i]] = true;\n          }\n          return true;\n        },\n        errorMessage: errorMessage\n      });\n      return this;\n    }\n  }, {\n    key: \"of\",\n    value: function of(type) {\n      _get(_getPrototypeOf(ArrayType.prototype), \"pushRule\", this).call(this, {\n        onValid: function onValid(items, data, filedName) {\n          var checkResults = items.map(function (value, index) {\n            var name = Array.isArray(filedName) ? [].concat(_toConsumableArray(filedName), [\"[\".concat(index, \"]\")]) : [filedName, \"[\".concat(index, \"]\")];\n            return type.check(value, data, name);\n          });\n          var hasError = !!checkResults.find(function (item) {\n            return item === null || item === void 0 ? void 0 : item.hasError;\n          });\n          return {\n            hasError: hasError,\n            array: checkResults\n          };\n        }\n      });\n      return this;\n    }\n  }]);\n  return ArrayType;\n}(MixedType);\nexport default function getArrayType(errorMessage) {\n  return new ArrayType(errorMessage);\n}","map":{"version":3,"names":["MixedType","ArrayType","_MixedType","_inherits","_super","_createSuper","errorMessage","_thisSuper","_this","_classCallCheck","call","_get","_assertThisInitialized","_getPrototypeOf","prototype","onValid","v","Array","isArray","locale","type","_createClass","key","value","rangeLength","minLength","maxLength","arguments","length","undefined","params","unrepeatable","items","hash","i","of","data","filedName","checkResults","map","index","name","concat","_toConsumableArray","check","hasError","find","item","array","getArrayType"],"sources":["/home/asmane/vtc/node_modules/schema-typed/src/ArrayType.ts"],"sourcesContent":["import { MixedType } from './MixedType';\nimport { PlainObject, CheckResult, ErrorMessageType } from './types';\nimport { ArrayTypeLocale } from './locales';\n\nexport class ArrayType<DataType = any, E = ErrorMessageType> extends MixedType<\n  any[],\n  DataType,\n  E,\n  ArrayTypeLocale\n> {\n  constructor(errorMessage?: E | string) {\n    super('array');\n    super.pushRule({\n      onValid: v => Array.isArray(v),\n      errorMessage: errorMessage || this.locale.type\n    });\n  }\n\n  rangeLength(\n    minLength: number,\n    maxLength: number,\n    errorMessage: E | string = this.locale.rangeLength\n  ) {\n    super.pushRule({\n      onValid: (value: string[]) => value.length >= minLength && value.length <= maxLength,\n      errorMessage,\n      params: { minLength, maxLength }\n    });\n    return this;\n  }\n\n  minLength(minLength: number, errorMessage: E | string = this.locale.minLength) {\n    super.pushRule({\n      onValid: value => value.length >= minLength,\n      errorMessage,\n      params: { minLength }\n    });\n\n    return this;\n  }\n\n  maxLength(maxLength: number, errorMessage: E | string = this.locale.maxLength) {\n    super.pushRule({\n      onValid: value => value.length <= maxLength,\n      errorMessage,\n      params: { maxLength }\n    });\n    return this;\n  }\n\n  unrepeatable(errorMessage: E | string = this.locale.unrepeatable) {\n    super.pushRule({\n      onValid: items => {\n        const hash: PlainObject = {};\n        for (const i in items) {\n          if (hash[items[i]]) {\n            return false;\n          }\n          hash[items[i]] = true;\n        }\n        return true;\n      },\n      errorMessage\n    });\n\n    return this;\n  }\n\n  of(type: MixedType<any, DataType, E>) {\n    super.pushRule({\n      onValid: (items, data, filedName) => {\n        const checkResults = items.map((value, index) => {\n          const name = Array.isArray(filedName)\n            ? [...filedName, `[${index}]`]\n            : [filedName, `[${index}]`];\n\n          return type.check(value, data, name as string[]);\n        });\n        const hasError = !!checkResults.find(item => item?.hasError);\n\n        return {\n          hasError,\n          array: checkResults\n        } as CheckResult<string | E>;\n      }\n    });\n\n    return this;\n  }\n}\n\nexport default function getArrayType<DataType = any, E = string>(errorMessage?: E) {\n  return new ArrayType<DataType, E>(errorMessage);\n}\n"],"mappings":";;;;;;;;AAAA,SAASA,SAAS,QAAQ,aAAa;AAIvC,WAAaC,SAAgD,0BAAAC,UAAA;EAAAC,SAAA,CAAAF,SAAA,EAAAC,UAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,SAAA;EAM3D,SAAAA,UAAYK,YAAyB;IAAA,IAAAC,UAAA,EAAAC,KAAA;IAAAC,eAAA,OAAAR,SAAA;IACnCO,KAAA,GAAAJ,MAAA,CAAAM,IAAA,OAAM,OAAO;IACbC,IAAA,EAAAJ,UAAA,GAAAK,sBAAA,CAAAJ,KAAA,GAAAK,eAAA,CAAAZ,SAAA,CAAAa,SAAA,gBAAAP,UAAA,EAAAG,IAAA,CAAAH,UAAA,EAAe;MACbQ,OAAO,EAAE,SAAAA,QAAAC,CAAC;QAAA,OAAIC,KAAK,CAACC,OAAO,CAACF,CAAC,CAAC;MAAA;MAC9BV,YAAY,EAAEA,YAAY,IAAIE,KAAA,CAAKW,MAAM,CAACC;KAC3C;IAAE,OAAAZ,KAAA;EACL;EAACa,YAAA,CAAApB,SAAA;IAAAqB,GAAA;IAAAC,KAAA,EAED,SAAAC,YACEC,SAAiB,EACjBC,SAAiB,EACiC;MAAA,IAAlDpB,YAAA,GAAAqB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAA2B,IAAI,CAACR,MAAM,CAACK,WAAW;MAElDb,IAAA,CAAAE,eAAA,CAAAZ,SAAA,CAAAa,SAAA,qBAAAJ,IAAA,OAAe;QACbK,OAAO,EAAE,SAAAA,QAACQ,KAAe;UAAA,OAAKA,KAAK,CAACK,MAAM,IAAIH,SAAS,IAAIF,KAAK,CAACK,MAAM,IAAIF,SAAS;QAAA;QACpFpB,YAAY,EAAZA,YAAY;QACZwB,MAAM,EAAE;UAAEL,SAAS,EAATA,SAAS;UAAEC,SAAS,EAATA;QAAS;OAC/B;MACD,OAAO,IAAI;IACb;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAED,SAAAE,UAAUA,UAAiB,EAAkD;MAAA,IAAhDnB,YAAA,GAAAqB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAA2B,IAAI,CAACR,MAAM,CAACM,SAAS;MAC3Ed,IAAA,CAAAE,eAAA,CAAAZ,SAAA,CAAAa,SAAA,qBAAAJ,IAAA,OAAe;QACbK,OAAO,EAAE,SAAAA,QAAAQ,KAAK;UAAA,OAAIA,KAAK,CAACK,MAAM,IAAIH,UAAS;QAAA;QAC3CnB,YAAY,EAAZA,YAAY;QACZwB,MAAM,EAAE;UAAEL,SAAS,EAATA;QAAS;OACpB;MAED,OAAO,IAAI;IACb;EAAC;IAAAH,GAAA;IAAAC,KAAA,EAED,SAAAG,UAAUA,UAAiB,EAAkD;MAAA,IAAhDpB,YAAA,GAAAqB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAA2B,IAAI,CAACR,MAAM,CAACO,SAAS;MAC3Ef,IAAA,CAAAE,eAAA,CAAAZ,SAAA,CAAAa,SAAA,qBAAAJ,IAAA,OAAe;QACbK,OAAO,EAAE,SAAAA,QAAAQ,KAAK;UAAA,OAAIA,KAAK,CAACK,MAAM,IAAIF,UAAS;QAAA;QAC3CpB,YAAY,EAAZA,YAAY;QACZwB,MAAM,EAAE;UAAEJ,SAAS,EAATA;QAAS;OACpB;MACD,OAAO,IAAI;IACb;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAED,SAAAQ,aAAA,EAAgE;MAAA,IAAnDzB,YAAA,GAAAqB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAA2B,IAAI,CAACR,MAAM,CAACY,YAAY;MAC9DpB,IAAA,CAAAE,eAAA,CAAAZ,SAAA,CAAAa,SAAA,qBAAAJ,IAAA,OAAe;QACbK,OAAO,EAAE,SAAAA,QAAAiB,KAAK,EAAG;UACf,IAAMC,IAAI,GAAgB,EAAE;UAC5B,KAAK,IAAMC,CAAC,IAAIF,KAAK,EAAE;YACrB,IAAIC,IAAI,CAACD,KAAK,CAACE,CAAC,CAAC,CAAC,EAAE;cAClB,OAAO,KAAK;;YAEdD,IAAI,CAACD,KAAK,CAACE,CAAC,CAAC,CAAC,GAAG,IAAI;;UAEvB,OAAO,IAAI;QACb,CAAC;QACD5B,YAAY,EAAZA;OACD;MAED,OAAO,IAAI;IACb;EAAC;IAAAgB,GAAA;IAAAC,KAAA,EAED,SAAAY,GAAGf,IAAiC;MAClCT,IAAA,CAAAE,eAAA,CAAAZ,SAAA,CAAAa,SAAA,qBAAAJ,IAAA,OAAe;QACbK,OAAO,EAAE,SAAAA,QAACiB,KAAK,EAAEI,IAAI,EAAEC,SAAS,EAAI;UAClC,IAAMC,YAAY,GAAGN,KAAK,CAACO,GAAG,CAAC,UAAChB,KAAK,EAAEiB,KAAK,EAAI;YAC9C,IAAMC,IAAI,GAAGxB,KAAK,CAACC,OAAO,CAACmB,SAAS,CAAC,MAAAK,MAAA,CAAAC,kBAAA,CAC7BN,SAAS,QAAAK,MAAA,CAAMF,KAAK,WACxB,CAACH,SAAS,MAAAK,MAAA,CAAMF,KAAK,OAAI;YAE7B,OAAOpB,IAAI,CAACwB,KAAK,CAACrB,KAAK,EAAEa,IAAI,EAAEK,IAAgB,CAAC;UAClD,CAAC,CAAC;UACF,IAAMI,QAAQ,GAAG,CAAC,CAACP,YAAY,CAACQ,IAAI,CAAC,UAAAC,IAAI;YAAA,OAAIA,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEF,QAAQ;UAAA,EAAC;UAE5D,OAAO;YACLA,QAAQ,EAARA,QAAQ;YACRG,KAAK,EAAEV;WACmB;QAC9B;OACD;MAED,OAAO,IAAI;IACb;EAAC;EAAA,OAAArC,SAAA;AAAA,EApFkED,SAKpE;AAkFD,eAAc,SAAUiD,YAAYA,CAA6B3C,YAAgB;EAC/E,OAAO,IAAIL,SAAS,CAAcK,YAAY,CAAC;AACjD"},"metadata":{},"sourceType":"module","externalDependencies":[]}